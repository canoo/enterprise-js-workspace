App={},App.Controller=function(){var a=function(a){this.inputView=a.input,this.detailView=a.detail,this.model=a.model,this.initialize()};return a.prototype.initialize=function(){var a=this;this.inputView.addKeyListener(function(b){a.model.addItem({name:b}),a.detailView.render({items:a.model.getItems()})}),this.inputView.addClickListener(function(b){a.model.addItem({name:b}),a.detailView.render({items:a.model.getItems()})}),this.detailView.addChangeListener(function(b,c){a.model.updateItem({name:b},c),a.detailView.render({items:a.model.getItems()})})},a}(),App.DetailView=function(){var a=function(a){a=a||{};var b=a.items||[],c=document.createElement("ul");return b.forEach(function(a,b){var d=document.createElement("li");d.innerHTML=a.name,d.dataset.index=b,d.contentEditable=!0,d.onblur=this.changeListener,c.appendChild(d)},this),c},b=function(b,c){this.el=b||document.body,this.template=(c||a).bind(this)};return b.prototype.addChangeListener=function(a){this.changeListener=function(b){var c=b.target,d=c.innerHTML,e=c.dataset.index;a(d,e)}},b.prototype.render=function(a){for(var b=this.template(a);this.el.firstChild;)this.el.removeChild(this.el.firstChild);this.el.appendChild(b)},b}(),App.InputView=function(){var a=function(a){this.el=a||document.body,this.initialize()};return a.prototype.initialize=function(){this.label=document.createElement("label"),this.label.innerHTML="Input",this.label.for="input",this.input=document.createElement("input"),this.input.id="input",this.input.type="input",this.button=document.createElement("button"),this.button.innerHTML="Add"},a.prototype._clearView=function(){for(;this.el.lastChild;)this.el.removeChild(this.el.lastChild)},a.prototype.render=function(){this._clearView(),this.el.appendChild(this.label),this.el.appendChild(this.input),this.el.appendChild(this.button)},a.prototype.addClickListener=function(a){var b=this;this.button.addEventListener("click",function(){b.input.value&&(a(b.input.value),b.input.value="")})},a.prototype.addKeyListener=function(a){var b=this;this.input.addEventListener("keyup",function(c){13==c.keyCode&&b.input.value&&(a(b.input.value),b.input.value="")})},a}(),App.Model=function(){var a=function(a){a=a||{},this.items=a.items||[]};return a.prototype.updateItem=function(a,b){this.items[b]=a},a.prototype.addItem=function(a){this.items.push(a)},a.prototype.getItems=function(){return this.items},a.prototype.setItems=function(a){this.items=a},a}(),function(a){document.addEventListener("DOMContentLoaded",function(){var b=document.getElementById("input"),c=document.getElementById("detail"),d=new a.Model,e=new a.DetailView(c),f=new a.InputView(b);f.render(),new a.Controller({input:f,detail:e,model:d})},!1)}(App);